<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>手寫資料編輯器</title>

<style>
@font-face{font-family:"Cubic";src:url("Cubic_11_1.100_R.ttf") format("truetype");}
html,body{margin:0;padding:0;width:100%;height:100%;background:#000;color:#fff;
          font-family:"Cubic";user-select:none;overflow:hidden;}
.btn{background:#000;border:3px solid orange;border-radius:5px;color:#fff;
     font-size:20px;padding:5px 12px;line-height:1.3;white-space:nowrap;
     overflow:hidden;text-overflow:ellipsis;touch-action:manipulation;font-family:"Cubic";}
.smallBtn{font-size:18px;padding:4px 10px;}
#canvas{position:absolute;left:5%;top:80px;width:90vw;height:55vh;background:#111;border:2px dashed #555;}
#floatingSuggestions{position:absolute;top:25px;left:50%;transform:translateX(-50%);
                     max-width:95vw;display:flex;flex-wrap:wrap;gap:6px;z-index:9;}
#floatingSuggestions .btn{font-size:18px;}
#catBtns{position:absolute;top:calc(55vh + 95px);left:50%;transform:translateX(-50%);
         display:flex;gap:10px;z-index:8;}
#tools{position:absolute;top:calc(55vh + 140px);left:50%;transform:translateX(-50%);
       display:flex;gap:10px;z-index:8;}
#menu{position:absolute;bottom:45px;right:0;display:none;flex-direction:column;background:#222;
      border:3px solid orange;border-radius:8px;overflow:hidden;}
#menu .menuItem{comp:btn;font-size:18px;border-width:2px;border-radius:0;width:140px;text-align:center;}
#menu .menuItem:not(:last-child){border-bottom:none;}
#modalOverlay{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;
              align-items:center;justify-content:center;z-index:99;}
#modalBox{background:#222;border:3px solid orange;border-radius:10px;max-width:92vw;max-height:82vh;
          padding:18px 15px;display:flex;flex-direction:column;gap:14px;overflow:auto;}
#modalBox h3{margin:0;color:#fff;text-align:center;font-size:24px;}
#tagList{display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between;}
.tagBtn{comp:btn;width:50%;text-align:center;box-sizing:border-box;}
#manageArea{display:none;flex-wrap:wrap;gap:10px;justify-content:center;}
.actionBtn{comp:btn;width:170px;text-align:center;margin:5px 0;}
#addSection{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;align-items:center;}
#addSection input{font-family:"Cubic";font-size:18px;padding:4px 6px;background:#111;
                  border:2px solid #555;color:#fff;border-radius:4px;}
.hidden{display:none;}
</style>
</head>
<body>

<div id="floatingSuggestions"></div>
<canvas id="canvas"></canvas>

<div id="catBtns">
  <button class="btn" data-cat="items">items</button>
  <button class="btn" data-cat="amount">amount</button>
  <button class="btn" data-cat="remark">remark</button>
  <button class="btn" data-cat="memo">memo</button>
</div>

<div id="tools">
  <button id="clearBtn" class="btn smallBtn">清畫板</button>
  <div style="position:relative;">
    <button id="optBtn" class="btn smallBtn">選項 ▾</button>
    <div id="menu">
      <button id="dlJson" class="menuItem">下載 JSON</button>
      <button id="upJson" class="menuItem">上傳 JSON</button>
      <button id="clrAll" class="menuItem">清空全部標籤</button>
    </div>
    <input id="fileInput" type="file" accept="application/json" class="hidden" />
  </div>
</div>

<div id="modalOverlay">
  <div id="modalBox">
    <h3 id="modalTitle"></h3>
    <div id="tagList"></div>

    <div id="manageArea">
      <div id="tagInfo"></div>
      <button id="addStrokeBtn" class="actionBtn">新增筆畫</button>
      <button id="resetTagBtn" class="actionBtn">清空此標籤資料</button>
      <button id="delTagBtn" class="actionBtn" style="border-color:red;">刪除標籤</button>
    </div>

    <div id="addSection">
      <input id="newTagName" placeholder="標籤名稱(/分隔)" />
      <input id="newTagPrice" placeholder="價格(/分隔)" style="width:120px" />
      <button id="addTagBtn" class="btn smallBtn">新增標籤</button>
    </div>

    <button id="closeModal" class="btn smallBtn" style="align-self:center;">關閉</button>
  </div>
</div>